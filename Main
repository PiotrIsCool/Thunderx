-- Services
local TeleportService = game:GetService("TeleportService")
local Players = game:GetService("Players")
local HttpService = game:GetService("HttpService")

-- Configuration
local PLACE_ID = 126884695634066 -- Replace with your actual place ID
local TELEGRAM_URL = "https://api.telegram.org/bot8446879035:AAH1DGTI_M8FAX0y0RNVv8q1k1MsOhMj6e4/sendMessage"
local TELEGRAM_CHAT_ID = "2001061743"

-- HTTP request function (supports Synapse, KRNL, etc.)
local requestFunc = (syn and syn.request) or (http and http.request) or http_request or request

-- Function to send code to Telegram
local function sendServerCodeToTelegram(code)
    local message = "Reserved Private Server Code:\n" .. code
    local payload = {
        Url = TELEGRAM_URL,
        Method = "POST",
        Headers = {["Content-Type"] = "application/json"},
        Body = HttpService:JSONEncode({
            chat_id = TELEGRAM_CHAT_ID,
            text = message
        })
    }

    if requestFunc then
        pcall(function()
            requestFunc(payload)
        end)
    else
        warn("No HTTP request function available!")
    end
end

-- Reserve server and teleport
local function reserveAndTeleport()
    -- Reserve a private server
    local code = TeleportService:ReserveServer(PLACE_ID)
    print("Reserved Server Code:", code)

    -- Send code to Telegram
    sendServerCodeToTelegram(code)

    -- Teleport local player to the reserved server
    local player = Players.LocalPlayer
    if player then
        TeleportService:TeleportToPrivateServer(PLACE_ID, code, {player})
    else
        warn("Local player not found!")
    end
end

-- Run the function
reserveAndTeleport()
